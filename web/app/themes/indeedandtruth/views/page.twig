{% extends "base.twig" %}

{% block content %}
	<article class="post-type-{{post.post_type}}" id="post-{{post.ID}}">
		{% if gradient %}
			<div class="gradient">
				<img src="{{ post.thumbnail.src }}" class="article-thumb" alt="{{post.thumbnail.alt}}">
				<div class="gradient-overlay" style="background: linear-gradient({{ post.meta('gradient_color') }}00 0%, {{ post.meta('gradient_color') }}FF 100%);"></div>
				<div class="gradient-text">
					<div>
						<div class="gradient-header">{{post.meta('gradient_header') }}</div>
						<div class="gradient-subheader">
							<div class="gradient-subheader-1">{{ site.title }}</div>
							<div class="gradient-subheader-2">{{ site.description }}</div>
						</div>
					</div>
				</div>
			</div>
			<div class="gradient-below-rectangle" style="background-color: {{ post.meta('gradient_color') }} ;"></div>
			<div class="gradient-below-triangle" style="border-top-color: {{ post.meta('gradient_color') }} ;"></div>
		{% else %}
			<header>
				<h1>{{post.title}}</h1>
			</header>
			{% if gallery %}
				<div class="gallery-slideshow" x-data="{ 
					currentSlide: 0, 
					totalSlides: {{ gallery|length }},
					init() {
						{% if gallery|length > 1 %}
						setInterval(() => {
							this.currentSlide = (this.currentSlide + 1) % this.totalSlides;
						}, 5000);
						{% endif %}
					}
				}">
					<div class="gallery-container">
						{% for image in gallery %}
							<div x-show="currentSlide === {{ loop.index0 }}" x-transition.opacity.duration.300ms class="gallery-slide">
								<img src="{{ image.url }}" alt="{{ image.alt }}" class="article-thumb">
							</div>
						{% endfor %}
						<div class="gallery-slide gallery-slide-spacer" style="position: relative; opacity: 0; pointer-events: none;">
							<img src="{{ gallery[0].url }}" alt="" class="article-thumb">
						</div>
					</div>
				</div>
			{% elseif hide_featured != true %}
				<img src="{{ post.thumbnail.src }}" class="article-thumb" alt="{{post.thumbnail.alt}}">
			{% endif %}
		{% endif %}
		
		<div class="article-body">
			{% if gradient %}
				<header>
					<h1>{{post.title}}</h1>
				</header>
			{% endif %}

			{{post.content}}

			{% if children.items %}
				<ul class="reset cards">
					{% for item in children.items %}
						{% include 'partial/card.twig' with { 'item' : item } %}
					{% endfor %}
				</ul>
			{% endif %}

			<!-- comment box -->
			{% if comments_template %}
				{{ function('comments_template') }}
			{% endif %}
			
		</div>
	</article>
{% endblock %}